# Minimal Module Template

Minimalistic module, that can be used as a template for writing modules.


## Directories

Directory name of the module defines fully qualified module __name__. Therefore
this module is named `templates_minimal_1`.

Fully qualified __name__ consists of __base name__ (`templates_minimal`) and __major
version suffix__ (`_1`). __Base name__ also consists of two parts: __vendor id__
(`templates`) and __module id__ (`minimal`). It is allowed to omit __module id__
for a single module from a specific vendor.

Typically each module will have directory structure similar to this one.

- `include` - public header files (available to other modules).
    - __vendor id__ - `templates` should be renamed to match __vendor id__.
        - __module id__ - `minimal` should be renamed to match __module id__.
            - `internal` - some headers need to be publicly available, but are
            implementation detail. This directory is for such files.
- `src` - Private header files and implementation.
    - __vendor id__ - `templates` should be renamed to match __vendor id__.
        - __module id__ - `minimal` should be renamed to match __module id__.
            - `plugin` - plugin-specific files (if module is a plugin).
            - `internal` - corresponds with `internal` subdirectory inside 
            `include` directory.
- `doc` - Documentation related files.

To keep things in order and avoid naming conflicts, C++ namespaces should
reflect above directory structure within `include` and `src` directories.


## Files

There are few files you have to edit in order to make custom module based on
this template. Inside these files you can find `Edit!` comments, which denote
that some edition to the line is necessary.

Here is a brief explanation of these files.

### <a href="../../modules/templates_minimal_1/README.md">README.md</a>

This file should contain brief description of the module and optionally
main page of documentation.


### [LICENSE]

This file should contain license applicable to your module.


### [templates_minimal_1.qbs]

This file defines module in terms of Qbs product. The name of this file should
be the same as directory name of the module, so you have to rename it.

```qbs
import cutehmi
```
This line is required to import `cutehmi` Qbs items.

```qbs
cutehmi.Module {
```
All modules inherit after cutehmi.Module item, which itself inherits after
cutehmi.CommonProduct. You can find definitions of these items in
[qbs directory](https://github.com/michpolicht/CuteHMI/tree/master/qbs/imports/cutehmi).

One of the noticeable things is that cutehmi.Module item depends on
cutehmi.metadata Qbs module, which will generate `cutehmi.metadata.json` and
`cutehmi.metadata.hpp` files. These files will contain the meta-information
extracted from properties of the `.qbs` file.

```qbs
name: "templates_minimal_1"
```
Product name is the same as fully qualified __name__. This is also the same as
directory name of the module.

```qbs
minor: 0

micro: 0
```
Minor version has to be specified as it is not inhered within `name` of
the product. Micro version also has to be specified. They may need to be editted
in future, but it is uncommon to use other values than zeros for initial version
of module.

```qbs
vendor: "The Secret Order of Templates"

friendlyName: "Minimal Module Template"
```
Human-friendly vendor and product names.

```qbs
description: "Minimalistic module, that can be used as a template for writing modules."
```
Description of the product.

```qbs
author: "Sheev Palpatine"
```
Author of the product.

```qbs
copyright: "KGB"
```
Copyright holder. [If you are confused, then do not allow lawyers to rule the 
world. Typically the same as author and vendor.]

```qbs
license: "Mozzarella Public License, v. alpha"
```
A license of the product. This should correspond to supplied [LICENSE] file.

```qbs
Depends { name: "cutehmi_1" }
cutehmi_1.reqMinor: 0
```
Tho' it is possible to create module that is independent from all other
modules, it is desirable to "glue" it with the rest of the framework
using [cutehmi_1](../cutehmi_1/) module.

Property `cutehmi_1.reqMinor` specifies required, minimal, minor version of
[cutehmi_1](../cutehmi_1/) module.

```qbs
Depends { name: "cutehmi.doxygen" }
```
Qbs module cutehmi.doxygen will generate Doxygen configuration file for the
module. Doxygen can then be used to generate documentation. Makefile in top 
project directory scans `modules` subdirectory for Doxygen configuration files
and mass-builds documentation. To avoid a flood of Doxygen warnings it may be
desirable to comment out this dependency in early stages of module development.


### [include/templates/minimal/metadata.hpp]

This file exposes metadata, autogenerated from the `.qbs` file, to other
modules.


### [include/templates/minimal/logging.hpp]

This header and corresponding source file enable Qt logging capabilities for the
module. Check Qt documentation on
[QLoggingCategory Class](http://doc.qt.io/qt-5/qloggingcategory.html) for more
information.

This file contains namespaces.
```cpp
namespace templates {
namespace minimal {
```
Namespaces reflect the directory structure. Because this file lies inside 
`templates/minimal` subdirectory of the `include` directory it uses
`namespace minimal` nested inside `namespace templates`. Modify namespaces
accordingly.


### [src/templates/minimal/logging.cpp]

This source file and corresponding header enable Qt logging capabilities for the
module. Check Qt documentation on
[QLoggingCategory Class](http://doc.qt.io/qt-5/qloggingcategory.html) for more
information.


### [include/templates/minimal/internal/common.hpp]

This file includes common headers and provides common macro definitions used by
nearly all other source files of the module it belongs to.

```cpp
#ifdef TEMPLATES_MINIMAL_DYNAMIC
	#ifdef TEMPLATES_MINIMAL_BUILD
		//export symbols to dll
		#define TEMPLATES_MINIMAL_API Q_DECL_EXPORT
	#else
		//using functions from dll
		#define TEMPLATES_MINIMAL_API Q_DECL_IMPORT
	#endif
#else
	#define TEMPLATES_MINIMAL_API
#endif
```
Above macro definitions wrap standard Qt `Q_DECL_EXPORT` and `Q_DECL_IMPORT`
macros. All classes or functions you want to expose to other modules shall be
decorated with `TEMPLATES_MINIMAL_API` macro (or rather
`YOU_YOURMODULE_API` after you have renamed it). Check out
[Creating Shared Libraries](https://doc.qt.io/Qt-5/sharedlibrary.html) for more
details.


### [doc/project_logo.png]

A file that will be used as a logo in documentation generated by Doxygen.
According to [Doxygen documentation]( https://www.stack.nl/~dimitri/doxygen/manual/config.html#cfg_project_logo)
> The maximum height of the logo should not exceed 55 pixels and the maximum
> width should not exceed 200 pixels.


## Extended template

This template can be used as a base to create modules.
[Project Plugin Template](../templates_projectplugin_1/) has some additional
files, suitable to use it as a base to create plugins.


[LICENSE]: ../../modules/templates_minimal_1/LICENSE
[templates_minimal_1.qbs]: ../../modules/templates_minimal_1/templates_minimal_1.qbs
[include/templates/minimal/metadata.hpp]: ../../modules/templates_minimal_1/include/templates/minimal/metadata.hpp
[include/templates/minimal/logging.hpp]: ../../modules/templates_minimal_1/include/templates/minimal/logging.hpp
[src/templates/minimal/logging.cpp]: ../../modules/templates_minimal_1/src/templates/minimal/logging.cpp
[include/templates/minimal/internal/common.hpp]: ../../modules/templates_minimal_1/include/templates/minimal/internal/common.hpp
[doc/project_logo.png]: ../../modules/templates_minimal_1/doc/project_logo.png

