<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Secret Order of Templates - XML Backend Template (templates_xmlbackend_1): The Secret Order of Templates - XML Backend Template</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="project_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Secret Order of Templates - XML Backend Template (templates_xmlbackend_1)
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../modules_list.html"><span>Modules</span></a></li>
      <li><a href="../tools_list.html"><span>Tools</span></a></li>
      <li><a href="../qml_list.html"><span>QML&#160;extensions</span></a></li>
      <li class="current"><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">The Secret Order of Templates - XML Backend Template </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Minimal XML plugin, that can be used as a template for writing plugins.</p>
<p>CuteHMI uses XML project files to specify, which plugins to load. A plugin will typically want to read some configuration itself. The project file can be used to store the configuration of a plugin.</p>
<p>This template builds on <a href="../templates_projectplugin_1/index.html">templates_projectplugin_1</a>. Only added XML capabilities will be briefly described.</p>
<h2>Files</h2>
<p>There aren't any new files, only modifications to existing one.</p>
<h3><a href="../../modules/templates_xmlbackend_1/templates_xmlbackend_1.qbs">templates_xmlbackend_1.qbs</a></h3>
<div class="fragment"><div class="line">Depends { name: &quot;cutehmi_xml_1&quot; }</div><div class="line">cutehmi_xml_1.reqMinor: 0</div></div><!-- fragment --><p> Dependency on <a href="../cutehmi_xml_1/index.html">cutehmi_xml_1</a> module has been added.</p>
<h3><a href="../../modules/templates_xmlbackend_1/src/templates/xmlbackend/plugin/ProjectPlugin.hpp">src/templates/xmlbackend/plugin/ProjectPlugin.hpp</a></h3>
<div class="fragment"><div class="line"><span class="keyword">public</span> <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a></div></div><!-- fragment --><p> ProjectPlugin has been modified to implement <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a> interface.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> readXML(<a class="codeRef" doxygen="/usr/share/qt5/doc/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamreader.html">QXmlStreamReader</a> &amp; xmlReader, <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html">cutehmi::ProjectNode</a> &amp; node) <span class="keyword">override</span>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> writeXML(<a class="codeRef" doxygen="/usr/share/qt5/doc/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamwriter.html">QXmlStreamWriter</a> &amp; xmlWriter, <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html">cutehmi::ProjectNode</a> &amp; node) <span class="keyword">const</span> noexcept(<span class="keyword">false</span>) <span class="keyword">override</span>;</div></div><!-- fragment --><p> There are two additional functions, which belong to <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a> interface.</p>
<h3><a href="../../modules/templates_xmlbackend_1/src/templates/xmlbackend/plugin/ProjectPlugin.cpp">src/templates/xmlbackend/plugin/ProjectPlugin.cpp</a></h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ProjectPlugin::init(<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html">cutehmi::ProjectNode</a> &amp; node)</div><div class="line">{</div><div class="line">        <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/doc/tags/cppreference.com/cppreference-doxygen-web.tag.xml:https://en.cppreference.com/w/" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr&lt;PluginNodeData&gt;</a> pluginNodeData(<span class="keyword">new</span> PluginNodeData(<span class="keyword">this</span>));</div><div class="line">        node.<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html#ab010c44068d2ef609d9d54082e55a490">registerExtension</a>(pluginNodeData-&gt;xmlBackendPlugin());</div><div class="line">        node.<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html#a8664d4818bdd83550257b1af8f0b7fe7">data</a>().<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1DataBlock.html#a86e1fbaa2340316c5234fa27539eda4f">append</a>(<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/doc/tags/cppreference.com/cppreference-doxygen-web.tag.xml:https://en.cppreference.com/w/" href="https://en.cppreference.com/w/cpp/utility/move.html">std::move</a>(pluginNodeData));</div><div class="line">}</div></div><!-- fragment --><p> ProjectPlugin implements <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a> interface, so <code>this</code> pointer is passed to an instance of PluginNodeData. PluginNodeData will create wrapping object belonging to <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1BackendPlugin.html">cutehmi::xml::BackendPlugin</a> class. This object can be retrieved via PluginNodeData::xmlBackendPlugin() function. The object is registered as an extension and classes belonging to <a href="../cutehmi_xml_1/index.html">cutehmi_xml_1</a> module will recognize this extension and a portion of XML document will be given to the plugin to parse.</p>
<p>PluginNodeData object is stored inside the node, which takes ownership of the object.</p>
<div class="fragment"><div class="line">CUTEHMI_LOG_DEBUG(<span class="stringliteral">&quot;Plugin &quot;</span> TEMPLATES_XMLBACKEND_NAME <span class="stringliteral">&quot; starts parsing its own portion of document...&quot;</span>);    <span class="comment">// Edit! Replace &#39;TEMPLATES_XMLBACKEND_NAME&#39; with &#39;VENDOR_MODULE_NAME&#39;.</span></div><div class="line"></div><div class="line"><a class="codeRef" doxygen="/usr/share/qt5/doc/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qstringlist.html">QStringList</a> supportedVersions;</div><div class="line">supportedVersions &lt;&lt; <span class="stringliteral">&quot;http://michpolicht.github.io/CuteHMI/templates_xmlbackend_1/xsd/1.0/&quot;</span>;   <span class="comment">// Edit! Replace &#39;templates_xmlbackend_1&#39; with &#39;vendor_module&#39;.</span></div></div><!-- fragment --><p> Plugins could use XML schema file as a mean of version control for an XML document, a namespace specifier and a validation tool. Because XML document format is not stable, this has never been implemented yet. For now it is enough to specify an URL, where XML schema file should be. This URL specifies version of supported XML format and a namespace.</p>
<div class="fragment"><div class="line"><a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1ParseHelper.html">cutehmi::xml::ParseHelper</a> helper(&amp; xmlReader, supportedVersions);</div><div class="line">helper &lt;&lt; <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1ParseElement_1_1AttributesContainer.html">cutehmi::xml::ParseElement</a>(<span class="stringliteral">&quot;templates_xmlbackend_1&quot;</span>, 1, 1);    <span class="comment">// Edit! Replace &#39;templates_xmlbackend_1&#39; with &#39;vendor_module&#39;.</span></div></div><!-- fragment --><p> A class called <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1ParseHelper.html">cutehmi::xml::ParseHelper</a> can be used to make it easier to parse XML.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> ProjectPlugin::writeXML(<a class="codeRef" doxygen="/usr/share/qt5/doc/qtcore/qtcore.tags:http://doc.qt.io/qt-5/" href="http://doc.qt.io/qt-5/qxmlstreamwriter.html">QXmlStreamWriter</a> &amp; xmlWriter, <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1ProjectNode.html">cutehmi::ProjectNode</a> &amp; node) <span class="keyword">const</span> noexcept(<span class="keyword">false</span>)</div><div class="line">{</div><div class="line">        Q_UNUSED(xmlWriter);</div><div class="line">        Q_UNUSED(node);</div><div class="line">        <span class="keywordflow">throw</span> <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1Exception.html">cutehmi::Exception</a>(<span class="stringliteral">&quot;cutehmi::xml::IBackendPlugin::writeXML() not implemented yet.&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><p> At this point XML project files have to be edited by hand, so we only throw an exception.</p>
<h3><a href="../../modules/templates_xmlbackend_1/src/templates/xmlbackend/plugin/PluginNodeData.hpp">src/templates/xmlbackend/plugin/PluginNodeData.hpp</a></h3>
<div class="fragment"><div class="line"><span class="keyword">public</span>:</div><div class="line">        PluginNodeData(<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a> * implementation);</div><div class="line"></div><div class="line">        <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1BackendPlugin.html">cutehmi::xml::BackendPlugin</a> * xmlBackendPlugin() <span class="keyword">const</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">        <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/doc/tags/cppreference.com/cppreference-doxygen-web.tag.xml:https://en.cppreference.com/w/" href="https://en.cppreference.com/w/cpp/memory/unique_ptr.html">std::unique_ptr&lt;cutehmi::xml::BackendPlugin&gt;</a> m_xmlBackendPlugin;</div></div><!-- fragment --><p> Plugin node data stores extension object.</p>
<h3><a href="../../modules/templates_xmlbackend_1/src/templates/xmlbackend/plugin/PluginNodeData.cpp">src/templates/xmlbackend/plugin/PluginNodeData.cpp</a></h3>
<div class="fragment"><div class="line">PluginNodeData::PluginNodeData(<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1IBackendPlugin.html">cutehmi::xml::IBackendPlugin</a> * implementation):</div><div class="line">        m_xmlBackendPlugin(new <a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_1/doxygen.tag:../cutehmi_1/" href="../cutehmi_1/classcutehmi_1_1internal_1_1PluginLoader_1_1BinaryAbsentException.html">cutehmi</a>::xml::BackendPlugin(implementation))</div><div class="line">{</div><div class="line">}</div><div class="line"></div><div class="line"><a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1BackendPlugin.html">cutehmi::xml::BackendPlugin</a> * <a class="code" href="classtemplates_1_1xmlbackend_1_1plugin_1_1PluginNodeData.html#a79a85e55f879c5667aa3fcd65bb90e1f">PluginNodeData::xmlBackendPlugin</a>()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">        <span class="keywordflow">return</span> m_xmlBackendPlugin.<a class="codeRef" doxygen="/home/cutebot/devel/CuteHMI/doc/tags/cppreference.com/cppreference-doxygen-web.tag.xml:https://en.cppreference.com/w/" href="https://en.cppreference.com/w/cpp/memory/unique_ptr/get.html">get</a>();</div><div class="line">}</div></div><!-- fragment --><p> Notice that a wrapping object <a class="elRef" doxygen="/home/cutebot/devel/CuteHMI/modules/cutehmi_xml_1/doxygen.tag:../cutehmi_xml_1/" href="../cutehmi_xml_1/classcutehmi_1_1xml_1_1BackendPlugin.html">cutehmi::xml::BackendPlugin</a> is created in the constructor to store <code>implementation</code> object within it. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
